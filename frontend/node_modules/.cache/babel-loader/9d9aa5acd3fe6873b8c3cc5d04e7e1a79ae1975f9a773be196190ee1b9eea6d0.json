{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Outlet,useLocation}from'react-router-dom';import{MenuIcon,XIcon}from'@heroicons/react/outline';import{useAuth}from'../../contexts/AuthContext';import Sidebar from'./Sidebar';import Navbar from'./Navbar';import BottomNav from'./BottomNav';import SkipNavigation from'../UI/SkipNavigation';import'../../styles/animations.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Layout=()=>{const{user}=useAuth();const[sidebarOpen,setSidebarOpen]=useState(false);const[pageTransition,setPageTransition]=useState(false);const location=useLocation();const isPremium=(user===null||user===void 0?void 0:user.subscriptionPlan)==='premium';// Close sidebar and trigger page transition when route changes\nuseEffect(()=>{setSidebarOpen(false);// Trigger page transition animation\nsetPageTransition(true);const timer=setTimeout(()=>{setPageTransition(false);},300);return()=>clearTimeout(timer);},[location]);const toggleSidebar=()=>{setSidebarOpen(!sidebarOpen);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-full bg-gray-50\",children:[/*#__PURE__*/_jsx(SkipNavigation,{mainContentId:\"main-content\"}),/*#__PURE__*/_jsx(\"div\",{className:`fixed inset-0 z-20 bg-gray-600 bg-opacity-75 transition-opacity duration-300 ease-in-out lg:hidden ${sidebarOpen?'opacity-100':'opacity-0 pointer-events-none'}`,onClick:toggleSidebar,\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsxs(\"div\",{className:`fixed inset-y-0 left-0 z-30 w-64 bg-white transform transition-transform duration-300 ease-in-out lg:hidden ${sidebarOpen?'translate-x-0 shadow-lg':'-translate-x-full'}`,role:\"navigation\",\"aria-label\":\"Mobile navigation\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-16 px-4 border-b\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-blue-600\",children:\"Nova Health\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:toggleSidebar,className:\"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors duration-200\",\"aria-label\":\"Close sidebar\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Close sidebar\"}),/*#__PURE__*/_jsx(XIcon,{className:\"h-6 w-6\",\"aria-hidden\":\"true\"})]})]}),/*#__PURE__*/_jsx(Sidebar,{onClose:toggleSidebar,user:user})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:flex lg:flex-shrink-0 transition-all duration-300\",role:\"navigation\",\"aria-label\":\"Main navigation\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-64 border-r border-gray-200 bg-white\",children:/*#__PURE__*/_jsx(Sidebar,{onClose:()=>{},user:user})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-1 w-0 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white border-b border-gray-200 lg:hidden shadow-sm\",role:\"banner\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"px-4 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors duration-200\",onClick:toggleSidebar,\"aria-label\":\"Open sidebar\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Open sidebar\"}),/*#__PURE__*/_jsx(MenuIcon,{className:\"h-6 w-6\",\"aria-hidden\":\"true\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-1 justify-center px-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 flex items-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold text-blue-600\",children:\"Nova Health\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center pr-4\",children:/*#__PURE__*/_jsx(Navbar,{onSidebarToggle:toggleSidebar,user:user,isMobile:true})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:flex sticky top-0 z-10 flex-shrink-0 h-16 bg-white border-b border-gray-200 shadow-sm transition-all duration-300\",role:\"banner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 px-4 flex justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center\"}),/*#__PURE__*/_jsx(Navbar,{onSidebarToggle:toggleSidebar,user:user,isMobile:false})]})}),/*#__PURE__*/_jsx(\"main\",{id:\"main-content\",className:`flex-1 relative overflow-y-auto focus:outline-none pb-16 sm:pb-0 transition-all duration-300 ${pageTransition?'opacity-0 translate-y-4':'opacity-100 translate-y-0'}`,tabIndex:-1,role:\"main\",children:/*#__PURE__*/_jsx(\"div\",{className:\"py-6 px-4 sm:px-6 md:px-8\",children:/*#__PURE__*/_jsx(Outlet,{})})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-top transition-transform duration-300 ease-in-out transform\",role:\"navigation\",\"aria-label\":\"Mobile bottom navigation\",children:/*#__PURE__*/_jsx(BottomNav,{isPremium:isPremium})})]})]});};export default Layout;","map":{"version":3,"names":["React","useState","useEffect","Outlet","useLocation","MenuIcon","XIcon","useAuth","Sidebar","Navbar","BottomNav","SkipNavigation","jsx","_jsx","jsxs","_jsxs","Layout","user","sidebarOpen","setSidebarOpen","pageTransition","setPageTransition","location","isPremium","subscriptionPlan","timer","setTimeout","clearTimeout","toggleSidebar","className","children","mainContentId","onClick","role","onClose","type","onSidebarToggle","isMobile","id","tabIndex"],"sources":["/Users/mosiho/Projects/Nova/frontend/src/components/Layout/Layout.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Outlet, useLocation } from 'react-router-dom';\nimport { MenuIcon, XIcon } from '@heroicons/react/outline';\nimport { useAuth } from '../../contexts/AuthContext';\nimport Sidebar from './Sidebar';\nimport Navbar from './Navbar';\nimport BottomNav from './BottomNav';\nimport SkipNavigation from '../UI/SkipNavigation';\nimport '../../styles/animations.css';\n\nconst Layout: React.FC = () => {\n  const { user } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [pageTransition, setPageTransition] = useState(false);\n  const location = useLocation();\n  const isPremium = user?.subscriptionPlan === 'premium';\n  \n  // Close sidebar and trigger page transition when route changes\n  useEffect(() => {\n    setSidebarOpen(false);\n    \n    // Trigger page transition animation\n    setPageTransition(true);\n    const timer = setTimeout(() => {\n      setPageTransition(false);\n    }, 300);\n    \n    return () => clearTimeout(timer);\n  }, [location]);\n\n  const toggleSidebar = () => {\n    setSidebarOpen(!sidebarOpen);\n  };\n\n  return (\n    <div className=\"flex h-full bg-gray-50\">\n      {/* Skip navigation for keyboard users */}\n      <SkipNavigation mainContentId=\"main-content\" />\n      \n      {/* Mobile sidebar overlay */}\n      <div \n        className={`fixed inset-0 z-20 bg-gray-600 bg-opacity-75 transition-opacity duration-300 ease-in-out lg:hidden ${\n          sidebarOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'\n        }`} \n        onClick={toggleSidebar}\n        aria-hidden=\"true\"\n      ></div>\n\n      {/* Mobile sidebar */}\n      <div \n        className={`fixed inset-y-0 left-0 z-30 w-64 bg-white transform transition-transform duration-300 ease-in-out lg:hidden ${\n          sidebarOpen ? 'translate-x-0 shadow-lg' : '-translate-x-full'\n        }`}\n        role=\"navigation\"\n        aria-label=\"Mobile navigation\"\n      >\n        <div className=\"flex items-center justify-between h-16 px-4 border-b\">\n          <h2 className=\"text-xl font-bold text-blue-600\">Nova Health</h2>\n          <button \n            onClick={toggleSidebar}\n            className=\"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors duration-200\"\n            aria-label=\"Close sidebar\"\n          >\n            <span className=\"sr-only\">Close sidebar</span>\n            <XIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n          </button>\n        </div>\n        <Sidebar onClose={toggleSidebar} user={user} />\n      </div>\n\n      {/* Desktop sidebar */}\n      <div \n        className=\"hidden lg:flex lg:flex-shrink-0 transition-all duration-300\" \n        role=\"navigation\" \n        aria-label=\"Main navigation\"\n      >\n        <div className=\"w-64 border-r border-gray-200 bg-white\">\n          <Sidebar onClose={() => {}} user={user} />\n        </div>\n      </div>\n\n      {/* Main content */}\n      <div className=\"flex flex-col flex-1 w-0 overflow-hidden\">\n        {/* Mobile navbar */}\n        <div \n          className=\"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white border-b border-gray-200 lg:hidden shadow-sm\"\n          role=\"banner\"\n        >\n          <button\n            type=\"button\"\n            className=\"px-4 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors duration-200\"\n            onClick={toggleSidebar}\n            aria-label=\"Open sidebar\"\n          >\n            <span className=\"sr-only\">Open sidebar</span>\n            <MenuIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n          </button>\n          <div className=\"flex flex-1 justify-center px-4\">\n            <div className=\"flex-shrink-0 flex items-center\">\n              <h1 className=\"text-lg font-bold text-blue-600\">Nova Health</h1>\n            </div>\n          </div>\n          <div className=\"flex items-center pr-4\">\n            <Navbar onSidebarToggle={toggleSidebar} user={user} isMobile={true} />\n          </div>\n        </div>\n\n        {/* Desktop navbar */}\n        <div \n          className=\"hidden lg:flex sticky top-0 z-10 flex-shrink-0 h-16 bg-white border-b border-gray-200 shadow-sm transition-all duration-300\"\n          role=\"banner\"\n        >\n          <div className=\"flex-1 px-4 flex justify-between\">\n            <div className=\"flex-1 flex items-center\">\n              {/* Page title comes from routes */}\n            </div>\n            <Navbar onSidebarToggle={toggleSidebar} user={user} isMobile={false} />\n          </div>\n        </div>\n\n        {/* Main content area */}\n        <main \n          id=\"main-content\" \n          className={`flex-1 relative overflow-y-auto focus:outline-none pb-16 sm:pb-0 transition-all duration-300 ${\n            pageTransition ? 'opacity-0 translate-y-4' : 'opacity-100 translate-y-0'\n          }`}\n          tabIndex={-1}\n          role=\"main\"\n        >\n          <div className=\"py-6 px-4 sm:px-6 md:px-8\">\n            <Outlet />\n          </div>\n        </main>\n        \n        {/* Mobile Bottom Navigation */}\n        <div \n          className=\"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-top transition-transform duration-300 ease-in-out transform\"\n          role=\"navigation\" \n          aria-label=\"Mobile bottom navigation\"\n        >\n          <BottomNav isPremium={isPremium} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Layout; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}