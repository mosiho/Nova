{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import{PaperAirplaneIcon,ChatAltIcon,RefreshIcon,LightBulbIcon,ShieldCheckIcon}from'@heroicons/react/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatAssistant=()=>{const{user}=useAuth();const[messages,setMessages]=useState([]);const[inputValue,setInputValue]=useState('');const[isLoading,setIsLoading]=useState(false);const[suggestionOpen,setSuggestionOpen]=useState(true);const messagesEndRef=useRef(null);// Check if user has premium subscription\nconst isPremium=(user===null||user===void 0?void 0:user.subscriptionPlan)==='premium';// Add initial welcome message\nuseEffect(()=>{const initialMessage={id:'1',role:'assistant',content:`Hello ${(user===null||user===void 0?void 0:user.firstName)||'there'}! I'm your Nova Health Assistant. I can help answer questions about your health data, provide supplement information, or offer general health guidance. How can I assist you today?`,timestamp:new Date()};setMessages([initialMessage]);},[user]);// Automatically scroll to bottom when messages update\nuseEffect(()=>{if(messagesEndRef.current){messagesEndRef.current.scrollIntoView({behavior:'smooth'});}},[messages]);const suggestions=[\"What supplements should I take for low vitamin D?\",\"How can I improve my sleep quality?\",\"What's the connection between my low iron and fatigue?\",\"Are my heart rate patterns normal?\"];const handleSuggestionClick=suggestion=>{setSuggestionOpen(false);setInputValue(suggestion);// Optional: Auto-submit the suggestion\n// handleSubmit(suggestion);\n};const handleInputChange=e=>{setInputValue(e.target.value);};const handleSubmit=async e=>{if(e instanceof Event){e.preventDefault();}// Don't submit empty messages\nconst messageText=typeof e==='string'?e:inputValue;if(!messageText.trim()||isLoading)return;// Create user message\nconst userMessage={id:Date.now().toString(),role:'user',content:messageText,timestamp:new Date()};// Add user message to chat\nsetMessages(prevMessages=>[...prevMessages,userMessage]);// Clear input\nsetInputValue('');// In a real application, this would call your AI service\nsetIsLoading(true);try{// Simulating API call to get assistant's response\nawait new Promise(resolve=>setTimeout(resolve,1500));// Mock responses based on keywords in the user message\nlet responseContent='';const lowerCaseMessage=messageText.toLowerCase();if(lowerCaseMessage.includes('vitamin d')||lowerCaseMessage.includes('vitamin')){responseContent=\"Based on your latest lab results, your vitamin D levels are indeed on the lower side. I'd recommend getting more sun exposure (about 15-30 minutes daily) and considering a vitamin D3 supplement. Our data shows that supplements with D3 and K2 combination work best for absorption. Would you like me to show you specific supplement options?\";}else if(lowerCaseMessage.includes('sleep')){responseContent=\"Looking at your sleep data from your connected Apple Watch, your deep sleep has been averaging only 15% of your total sleep time, which is below the ideal range of 20-25%. Try establishing a consistent sleep schedule, avoid screens 1 hour before bed, and consider magnesium glycinate which may help improve sleep quality.\";}else if(lowerCaseMessage.includes('iron')||lowerCaseMessage.includes('fatigue')){responseContent=\"Your latest lab tests from May 2023 show iron levels at the lower end of the normal range. This could contribute to your fatigue. I notice your ferritin is also low, suggesting depleted iron stores. Consider iron-rich foods like spinach, lentils, and grass-fed beef. A vitamin C-rich food paired with iron sources can help absorption.\";}else if(lowerCaseMessage.includes('heart rate')){responseContent=\"Your heart rate patterns are within normal range. Your resting heart rate averages 68 bpm, which is healthy. I notice your heart rate variability has been improving over the last month, which is an excellent sign of cardiovascular health and stress resilience. Continue with your current exercise routine as it's showing positive effects.\";}else{responseContent=\"I understand you're asking about \"+messageText.split(' ').slice(0,3).join(' ')+\"... To give you the most accurate guidance, I'd need to analyze your specific health data. Based on your profile, I can see your recent lab tests and connected devices data. Would you like me to check for any patterns or specific recommendations related to this topic?\";}// Create assistant message\nconst assistantMessage={id:(Date.now()+1).toString(),role:'assistant',content:responseContent,timestamp:new Date()};// Add assistant message to chat\nsetMessages(prevMessages=>[...prevMessages,assistantMessage]);}catch(error){console.error('Error getting AI response:',error);// Add error message\nconst errorMessage={id:(Date.now()+1).toString(),role:'assistant',content:\"I'm sorry, I'm having trouble connecting to the server. Please try again in a moment.\",timestamp:new Date()};setMessages(prevMessages=>[...prevMessages,errorMessage]);}finally{setIsLoading(false);}};const formatTimestamp=date=>{return date.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});};const resetChat=()=>{// Add initial welcome message again\nconst initialMessage={id:Date.now().toString(),role:'assistant',content:`Hello ${(user===null||user===void 0?void 0:user.firstName)||'there'}! I'm your Nova Health Assistant. How can I assist you today?`,timestamp:new Date()};setMessages([initialMessage]);setSuggestionOpen(true);};if(!isPremium){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-3xl mx-auto py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(LightBulbIcon,{className:\"mx-auto h-12 w-12 text-yellow-400\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-4 text-2xl font-bold text-gray-900\",children:\"Health Assistant is a Premium Feature\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 max-w-md mx-auto\",children:\"Get personalized health guidance, supplement recommendations, and answers to all your health questions.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/subscriptions\",className:\"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\",children:\"Upgrade to Premium\"})})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-3xl mx-auto h-full flex flex-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg flex-1 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 p-2 rounded-full\",children:/*#__PURE__*/_jsx(ChatAltIcon,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:\"Health Assistant\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Powered by AI\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:resetChat,className:\"inline-flex items-center p-2 border border-transparent rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none\",children:/*#__PURE__*/_jsx(RefreshIcon,{className:\"h-5 w-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-4 space-y-4 overflow-y-auto\",children:[messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:`flex ${message.role==='user'?'justify-end':'justify-start'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:`max-w-xs sm:max-w-md px-4 py-3 rounded-lg ${message.role==='user'?'bg-blue-600 text-white':'bg-gray-100 text-gray-800'}`,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:message.content}),/*#__PURE__*/_jsx(\"p\",{className:`text-xs mt-1 text-right ${message.role==='user'?'text-blue-200':'text-gray-500'}`,children:formatTimestamp(message.timestamp)})]})},message.id)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 px-4 py-3 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.4s'}})]})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),suggestionOpen&&messages.length===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 bg-blue-50\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-blue-800 mb-2\",children:\"Suggested questions:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:suggestions.map((suggestion,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSuggestionClick(suggestion),className:\"text-sm bg-white border border-blue-300 rounded-full px-3 py-1 text-blue-700 hover:bg-blue-100\",children:suggestion},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 border-t border-gray-200 bg-gray-50\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 flex items-center\",children:[/*#__PURE__*/_jsx(ShieldCheckIcon,{className:\"h-3 w-3 mr-1\"}),\"Your conversations are private and used only to improve your health recommendations\"]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-4 border-t flex\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ask about your health, lab results, or supplements...\",className:\"flex-1 rounded-l-lg border-r-0 focus:ring-blue-500 focus:border-blue-500\",value:inputValue,onChange:handleInputChange,disabled:isLoading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading||!inputValue.trim(),className:`inline-flex items-center px-4 py-2 border border-transparent rounded-r-lg text-white ${isLoading||!inputValue.trim()?'bg-blue-400':'bg-blue-600 hover:bg-blue-700'}`,children:/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-5 w-5\"})})]})]})});};export default ChatAssistant;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useAuth","PaperAirplaneIcon","ChatAltIcon","RefreshIcon","LightBulbIcon","ShieldCheckIcon","jsx","_jsx","jsxs","_jsxs","ChatAssistant","user","messages","setMessages","inputValue","setInputValue","isLoading","setIsLoading","suggestionOpen","setSuggestionOpen","messagesEndRef","isPremium","subscriptionPlan","initialMessage","id","role","content","firstName","timestamp","Date","current","scrollIntoView","behavior","suggestions","handleSuggestionClick","suggestion","handleInputChange","e","target","value","handleSubmit","Event","preventDefault","messageText","trim","userMessage","now","toString","prevMessages","Promise","resolve","setTimeout","responseContent","lowerCaseMessage","toLowerCase","includes","split","slice","join","assistantMessage","error","console","errorMessage","formatTimestamp","date","toLocaleTimeString","hour","minute","resetChat","className","children","to","onClick","map","message","style","animationDelay","ref","length","index","onSubmit","type","placeholder","onChange","disabled"],"sources":["/Users/mosiho/Projects/Nova/frontend/src/pages/ChatAssistant/ChatAssistant.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { \n  PaperAirplaneIcon, \n  ChatAltIcon, \n  RefreshIcon,\n  LightBulbIcon,\n  ShieldCheckIcon\n} from '@heroicons/react/outline';\n\ninterface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\nconst ChatAssistant: React.FC = () => {\n  const { user } = useAuth();\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputValue, setInputValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [suggestionOpen, setSuggestionOpen] = useState(true);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  \n  // Check if user has premium subscription\n  const isPremium = user?.subscriptionPlan === 'premium';\n\n  // Add initial welcome message\n  useEffect(() => {\n    const initialMessage: Message = {\n      id: '1',\n      role: 'assistant',\n      content: `Hello ${user?.firstName || 'there'}! I'm your Nova Health Assistant. I can help answer questions about your health data, provide supplement information, or offer general health guidance. How can I assist you today?`,\n      timestamp: new Date()\n    };\n    setMessages([initialMessage]);\n  }, [user]);\n\n  // Automatically scroll to bottom when messages update\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [messages]);\n\n  const suggestions = [\n    \"What supplements should I take for low vitamin D?\",\n    \"How can I improve my sleep quality?\",\n    \"What's the connection between my low iron and fatigue?\",\n    \"Are my heart rate patterns normal?\"\n  ];\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setSuggestionOpen(false);\n    setInputValue(suggestion);\n    // Optional: Auto-submit the suggestion\n    // handleSubmit(suggestion);\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInputValue(e.target.value);\n  };\n\n  const handleSubmit = async (e: React.FormEvent | string) => {\n    if (e instanceof Event) {\n      e.preventDefault();\n    }\n    \n    // Don't submit empty messages\n    const messageText = typeof e === 'string' ? e : inputValue;\n    if (!messageText.trim() || isLoading) return;\n    \n    // Create user message\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: messageText,\n      timestamp: new Date()\n    };\n    \n    // Add user message to chat\n    setMessages(prevMessages => [...prevMessages, userMessage]);\n    \n    // Clear input\n    setInputValue('');\n    \n    // In a real application, this would call your AI service\n    setIsLoading(true);\n    \n    try {\n      // Simulating API call to get assistant's response\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      // Mock responses based on keywords in the user message\n      let responseContent = '';\n      const lowerCaseMessage = messageText.toLowerCase();\n      \n      if (lowerCaseMessage.includes('vitamin d') || lowerCaseMessage.includes('vitamin')) {\n        responseContent = \"Based on your latest lab results, your vitamin D levels are indeed on the lower side. I'd recommend getting more sun exposure (about 15-30 minutes daily) and considering a vitamin D3 supplement. Our data shows that supplements with D3 and K2 combination work best for absorption. Would you like me to show you specific supplement options?\";\n      } else if (lowerCaseMessage.includes('sleep')) {\n        responseContent = \"Looking at your sleep data from your connected Apple Watch, your deep sleep has been averaging only 15% of your total sleep time, which is below the ideal range of 20-25%. Try establishing a consistent sleep schedule, avoid screens 1 hour before bed, and consider magnesium glycinate which may help improve sleep quality.\";\n      } else if (lowerCaseMessage.includes('iron') || lowerCaseMessage.includes('fatigue')) {\n        responseContent = \"Your latest lab tests from May 2023 show iron levels at the lower end of the normal range. This could contribute to your fatigue. I notice your ferritin is also low, suggesting depleted iron stores. Consider iron-rich foods like spinach, lentils, and grass-fed beef. A vitamin C-rich food paired with iron sources can help absorption.\";\n      } else if (lowerCaseMessage.includes('heart rate')) {\n        responseContent = \"Your heart rate patterns are within normal range. Your resting heart rate averages 68 bpm, which is healthy. I notice your heart rate variability has been improving over the last month, which is an excellent sign of cardiovascular health and stress resilience. Continue with your current exercise routine as it's showing positive effects.\";\n      } else {\n        responseContent = \"I understand you're asking about \" + messageText.split(' ').slice(0, 3).join(' ') + \"... To give you the most accurate guidance, I'd need to analyze your specific health data. Based on your profile, I can see your recent lab tests and connected devices data. Would you like me to check for any patterns or specific recommendations related to this topic?\";\n      }\n      \n      // Create assistant message\n      const assistantMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: responseContent,\n        timestamp: new Date()\n      };\n      \n      // Add assistant message to chat\n      setMessages(prevMessages => [...prevMessages, assistantMessage]);\n      \n    } catch (error) {\n      console.error('Error getting AI response:', error);\n      \n      // Add error message\n      const errorMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: \"I'm sorry, I'm having trouble connecting to the server. Please try again in a moment.\",\n        timestamp: new Date()\n      };\n      \n      setMessages(prevMessages => [...prevMessages, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const formatTimestamp = (date: Date) => {\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const resetChat = () => {\n    // Add initial welcome message again\n    const initialMessage: Message = {\n      id: Date.now().toString(),\n      role: 'assistant',\n      content: `Hello ${user?.firstName || 'there'}! I'm your Nova Health Assistant. How can I assist you today?`,\n      timestamp: new Date()\n    };\n    setMessages([initialMessage]);\n    setSuggestionOpen(true);\n  };\n\n  if (!isPremium) {\n    return (\n      <div className=\"max-w-3xl mx-auto py-8\">\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n          <LightBulbIcon className=\"mx-auto h-12 w-12 text-yellow-400\" />\n          <h2 className=\"mt-4 text-2xl font-bold text-gray-900\">Health Assistant is a Premium Feature</h2>\n          <p className=\"mt-2 text-gray-600 max-w-md mx-auto\">\n            Get personalized health guidance, supplement recommendations, and answers to all your health questions.\n          </p>\n          <div className=\"mt-6\">\n            <Link\n              to=\"/subscriptions\"\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\"\n            >\n              Upgrade to Premium\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-3xl mx-auto h-full flex flex-col\">\n      <div className=\"bg-white shadow rounded-lg flex-1 flex flex-col\">\n        {/* Chat header */}\n        <div className=\"p-4 border-b flex justify-between items-center\">\n          <div className=\"flex items-center\">\n            <div className=\"bg-blue-100 p-2 rounded-full\">\n              <ChatAltIcon className=\"h-6 w-6 text-blue-600\" />\n            </div>\n            <div className=\"ml-3\">\n              <h2 className=\"text-lg font-medium text-gray-900\">Health Assistant</h2>\n              <p className=\"text-sm text-gray-500\">Powered by AI</p>\n            </div>\n          </div>\n          <button\n            onClick={resetChat}\n            className=\"inline-flex items-center p-2 border border-transparent rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none\"\n          >\n            <RefreshIcon className=\"h-5 w-5\" />\n          </button>\n        </div>\n        \n        {/* Chat messages */}\n        <div className=\"flex-1 p-4 space-y-4 overflow-y-auto\">\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n            >\n              <div\n                className={`max-w-xs sm:max-w-md px-4 py-3 rounded-lg ${\n                  message.role === 'user'\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-gray-100 text-gray-800'\n                }`}\n              >\n                <p className=\"text-sm\">{message.content}</p>\n                <p\n                  className={`text-xs mt-1 text-right ${\n                    message.role === 'user' ? 'text-blue-200' : 'text-gray-500'\n                  }`}\n                >\n                  {formatTimestamp(message.timestamp)}\n                </p>\n              </div>\n            </div>\n          ))}\n          \n          {isLoading && (\n            <div className=\"flex justify-start\">\n              <div className=\"bg-gray-100 px-4 py-3 rounded-lg\">\n                <div className=\"flex space-x-2\">\n                  <div className=\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                  <div className=\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                  <div className=\"h-2 w-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.4s' }}></div>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          {/* Invisible element to scroll to */}\n          <div ref={messagesEndRef} />\n        </div>\n        \n        {/* Suggestions */}\n        {suggestionOpen && messages.length === 1 && (\n          <div className=\"px-4 py-3 bg-blue-50\">\n            <h3 className=\"text-sm font-medium text-blue-800 mb-2\">Suggested questions:</h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {suggestions.map((suggestion, index) => (\n                <button\n                  key={index}\n                  onClick={() => handleSuggestionClick(suggestion)}\n                  className=\"text-sm bg-white border border-blue-300 rounded-full px-3 py-1 text-blue-700 hover:bg-blue-100\"\n                >\n                  {suggestion}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        {/* Privacy notice */}\n        <div className=\"px-4 py-2 border-t border-gray-200 bg-gray-50\">\n          <p className=\"text-xs text-gray-500 flex items-center\">\n            <ShieldCheckIcon className=\"h-3 w-3 mr-1\" />\n            Your conversations are private and used only to improve your health recommendations\n          </p>\n        </div>\n        \n        {/* Input form */}\n        <form onSubmit={handleSubmit} className=\"p-4 border-t flex\">\n          <input\n            type=\"text\"\n            placeholder=\"Ask about your health, lab results, or supplements...\"\n            className=\"flex-1 rounded-l-lg border-r-0 focus:ring-blue-500 focus:border-blue-500\"\n            value={inputValue}\n            onChange={handleInputChange}\n            disabled={isLoading}\n          />\n          <button\n            type=\"submit\"\n            disabled={isLoading || !inputValue.trim()}\n            className={`inline-flex items-center px-4 py-2 border border-transparent rounded-r-lg text-white ${\n              isLoading || !inputValue.trim() \n                ? 'bg-blue-400' \n                : 'bg-blue-600 hover:bg-blue-700'\n            }`}\n          >\n            <PaperAirplaneIcon className=\"h-5 w-5\" />\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatAssistant; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,OAAO,KAAQ,4BAA4B,CACpD,OACEC,iBAAiB,CACjBC,WAAW,CACXC,WAAW,CACXC,aAAa,CACbC,eAAe,KACV,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBASlC,KAAM,CAAAC,aAAuB,CAAGA,CAAA,GAAM,CACpC,KAAM,CAAEC,IAAK,CAAC,CAAGX,OAAO,CAAC,CAAC,CAC1B,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGjB,QAAQ,CAAY,EAAE,CAAC,CACvD,KAAM,CAACkB,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACoB,SAAS,CAAEC,YAAY,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACsB,cAAc,CAAEC,iBAAiB,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAAAwB,cAAc,CAAGtB,MAAM,CAAiB,IAAI,CAAC,CAEnD;AACA,KAAM,CAAAuB,SAAS,CAAG,CAAAV,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEW,gBAAgB,IAAK,SAAS,CAEtD;AACAzB,SAAS,CAAC,IAAM,CACd,KAAM,CAAA0B,cAAuB,CAAG,CAC9BC,EAAE,CAAE,GAAG,CACPC,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,SAAS,CAAAf,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgB,SAAS,GAAI,OAAO,qLAAqL,CACjOC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CACtB,CAAC,CACDhB,WAAW,CAAC,CAACU,cAAc,CAAC,CAAC,CAC/B,CAAC,CAAE,CAACZ,IAAI,CAAC,CAAC,CAEV;AACAd,SAAS,CAAC,IAAM,CACd,GAAIuB,cAAc,CAACU,OAAO,CAAE,CAC1BV,cAAc,CAACU,OAAO,CAACC,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAC/D,CACF,CAAC,CAAE,CAACpB,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAqB,WAAW,CAAG,CAClB,mDAAmD,CACnD,qCAAqC,CACrC,wDAAwD,CACxD,oCAAoC,CACrC,CAED,KAAM,CAAAC,qBAAqB,CAAIC,UAAkB,EAAK,CACpDhB,iBAAiB,CAAC,KAAK,CAAC,CACxBJ,aAAa,CAACoB,UAAU,CAAC,CACzB;AACA;AACF,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAIC,CAAsC,EAAK,CACpEtB,aAAa,CAACsB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC/B,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAH,CAA2B,EAAK,CAC1D,GAAIA,CAAC,WAAY,CAAAI,KAAK,CAAE,CACtBJ,CAAC,CAACK,cAAc,CAAC,CAAC,CACpB,CAEA;AACA,KAAM,CAAAC,WAAW,CAAG,MAAO,CAAAN,CAAC,GAAK,QAAQ,CAAGA,CAAC,CAAGvB,UAAU,CAC1D,GAAI,CAAC6B,WAAW,CAACC,IAAI,CAAC,CAAC,EAAI5B,SAAS,CAAE,OAEtC;AACA,KAAM,CAAA6B,WAAoB,CAAG,CAC3BrB,EAAE,CAAEK,IAAI,CAACiB,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACzBtB,IAAI,CAAE,MAAM,CACZC,OAAO,CAAEiB,WAAW,CACpBf,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CACtB,CAAC,CAED;AACAhB,WAAW,CAACmC,YAAY,EAAI,CAAC,GAAGA,YAAY,CAAEH,WAAW,CAAC,CAAC,CAE3D;AACA9B,aAAa,CAAC,EAAE,CAAC,CAEjB;AACAE,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CACF;AACA,KAAM,IAAI,CAAAgC,OAAO,CAACC,OAAO,EAAIC,UAAU,CAACD,OAAO,CAAE,IAAI,CAAC,CAAC,CAEvD;AACA,GAAI,CAAAE,eAAe,CAAG,EAAE,CACxB,KAAM,CAAAC,gBAAgB,CAAGV,WAAW,CAACW,WAAW,CAAC,CAAC,CAElD,GAAID,gBAAgB,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAIF,gBAAgB,CAACE,QAAQ,CAAC,SAAS,CAAC,CAAE,CAClFH,eAAe,CAAG,oVAAoV,CACxW,CAAC,IAAM,IAAIC,gBAAgB,CAACE,QAAQ,CAAC,OAAO,CAAC,CAAE,CAC7CH,eAAe,CAAG,mUAAmU,CACvV,CAAC,IAAM,IAAIC,gBAAgB,CAACE,QAAQ,CAAC,MAAM,CAAC,EAAIF,gBAAgB,CAACE,QAAQ,CAAC,SAAS,CAAC,CAAE,CACpFH,eAAe,CAAG,gVAAgV,CACpW,CAAC,IAAM,IAAIC,gBAAgB,CAACE,QAAQ,CAAC,YAAY,CAAC,CAAE,CAClDH,eAAe,CAAG,oVAAoV,CACxW,CAAC,IAAM,CACLA,eAAe,CAAG,mCAAmC,CAAGT,WAAW,CAACa,KAAK,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAAG,8QAA8Q,CACvX,CAEA;AACA,KAAM,CAAAC,gBAAyB,CAAG,CAChCnC,EAAE,CAAE,CAACK,IAAI,CAACiB,GAAG,CAAC,CAAC,CAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC,CAC/BtB,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE0B,eAAe,CACxBxB,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CACtB,CAAC,CAED;AACAhB,WAAW,CAACmC,YAAY,EAAI,CAAC,GAAGA,YAAY,CAAEW,gBAAgB,CAAC,CAAC,CAElE,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAElD;AACA,KAAM,CAAAE,YAAqB,CAAG,CAC5BtC,EAAE,CAAE,CAACK,IAAI,CAACiB,GAAG,CAAC,CAAC,CAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC,CAC/BtB,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,uFAAuF,CAChGE,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CACtB,CAAC,CAEDhB,WAAW,CAACmC,YAAY,EAAI,CAAC,GAAGA,YAAY,CAAEc,YAAY,CAAC,CAAC,CAC9D,CAAC,OAAS,CACR7C,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAA8C,eAAe,CAAIC,IAAU,EAAK,CACtC,MAAO,CAAAA,IAAI,CAACC,kBAAkB,CAAC,EAAE,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAU,CAAC,CAAC,CAC5E,CAAC,CAED,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB;AACA,KAAM,CAAA7C,cAAuB,CAAG,CAC9BC,EAAE,CAAEK,IAAI,CAACiB,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACzBtB,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,SAAS,CAAAf,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgB,SAAS,GAAI,OAAO,+DAA+D,CAC3GC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CACtB,CAAC,CACDhB,WAAW,CAAC,CAACU,cAAc,CAAC,CAAC,CAC7BJ,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAC,CAED,GAAI,CAACE,SAAS,CAAE,CACd,mBACEd,IAAA,QAAK8D,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrC7D,KAAA,QAAK4D,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9D/D,IAAA,CAACH,aAAa,EAACiE,SAAS,CAAC,mCAAmC,CAAE,CAAC,cAC/D9D,IAAA,OAAI8D,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,uCAAqC,CAAI,CAAC,cAChG/D,IAAA,MAAG8D,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,yGAEnD,CAAG,CAAC,cACJ/D,IAAA,QAAK8D,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnB/D,IAAA,CAACR,IAAI,EACHwE,EAAE,CAAC,gBAAgB,CACnBF,SAAS,CAAC,kJAAkJ,CAAAC,QAAA,CAC7J,oBAED,CAAM,CAAC,CACJ,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA,mBACE/D,IAAA,QAAK8D,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cACrD7D,KAAA,QAAK4D,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAE9D7D,KAAA,QAAK4D,SAAS,CAAC,gDAAgD,CAAAC,QAAA,eAC7D7D,KAAA,QAAK4D,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC/D,IAAA,QAAK8D,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3C/D,IAAA,CAACL,WAAW,EAACmE,SAAS,CAAC,uBAAuB,CAAE,CAAC,CAC9C,CAAC,cACN5D,KAAA,QAAK4D,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB/D,IAAA,OAAI8D,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cACvE/D,IAAA,MAAG8D,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,eAAa,CAAG,CAAC,EACnD,CAAC,EACH,CAAC,cACN/D,IAAA,WACEiE,OAAO,CAAEJ,SAAU,CACnBC,SAAS,CAAC,4IAA4I,CAAAC,QAAA,cAEtJ/D,IAAA,CAACJ,WAAW,EAACkE,SAAS,CAAC,SAAS,CAAE,CAAC,CAC7B,CAAC,EACN,CAAC,cAGN5D,KAAA,QAAK4D,SAAS,CAAC,sCAAsC,CAAAC,QAAA,EAClD1D,QAAQ,CAAC6D,GAAG,CAAEC,OAAO,eACpBnE,IAAA,QAEE8D,SAAS,CAAE,QAAQK,OAAO,CAACjD,IAAI,GAAK,MAAM,CAAG,aAAa,CAAG,eAAe,EAAG,CAAA6C,QAAA,cAE/E7D,KAAA,QACE4D,SAAS,CAAE,6CACTK,OAAO,CAACjD,IAAI,GAAK,MAAM,CACnB,wBAAwB,CACxB,2BAA2B,EAC9B,CAAA6C,QAAA,eAEH/D,IAAA,MAAG8D,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEI,OAAO,CAAChD,OAAO,CAAI,CAAC,cAC5CnB,IAAA,MACE8D,SAAS,CAAE,2BACTK,OAAO,CAACjD,IAAI,GAAK,MAAM,CAAG,eAAe,CAAG,eAAe,EAC1D,CAAA6C,QAAA,CAEFP,eAAe,CAACW,OAAO,CAAC9C,SAAS,CAAC,CAClC,CAAC,EACD,CAAC,EAlBD8C,OAAO,CAAClD,EAmBV,CACN,CAAC,CAEDR,SAAS,eACRT,IAAA,QAAK8D,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjC/D,IAAA,QAAK8D,SAAS,CAAC,kCAAkC,CAAAC,QAAA,cAC/C7D,KAAA,QAAK4D,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B/D,IAAA,QAAK8D,SAAS,CAAC,iDAAiD,CAAM,CAAC,cACvE9D,IAAA,QAAK8D,SAAS,CAAC,iDAAiD,CAACM,KAAK,CAAE,CAAEC,cAAc,CAAE,MAAO,CAAE,CAAM,CAAC,cAC1GrE,IAAA,QAAK8D,SAAS,CAAC,iDAAiD,CAACM,KAAK,CAAE,CAAEC,cAAc,CAAE,MAAO,CAAE,CAAM,CAAC,EACvG,CAAC,CACH,CAAC,CACH,CACN,cAGDrE,IAAA,QAAKsE,GAAG,CAAEzD,cAAe,CAAE,CAAC,EACzB,CAAC,CAGLF,cAAc,EAAIN,QAAQ,CAACkE,MAAM,GAAK,CAAC,eACtCrE,KAAA,QAAK4D,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC/D,IAAA,OAAI8D,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,sBAAoB,CAAI,CAAC,cAChF/D,IAAA,QAAK8D,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAClCrC,WAAW,CAACwC,GAAG,CAAC,CAACtC,UAAU,CAAE4C,KAAK,gBACjCxE,IAAA,WAEEiE,OAAO,CAAEA,CAAA,GAAMtC,qBAAqB,CAACC,UAAU,CAAE,CACjDkC,SAAS,CAAC,gGAAgG,CAAAC,QAAA,CAEzGnC,UAAU,EAJN4C,KAKC,CACT,CAAC,CACC,CAAC,EACH,CACN,cAGDxE,IAAA,QAAK8D,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5D7D,KAAA,MAAG4D,SAAS,CAAC,yCAAyC,CAAAC,QAAA,eACpD/D,IAAA,CAACF,eAAe,EAACgE,SAAS,CAAC,cAAc,CAAE,CAAC,sFAE9C,EAAG,CAAC,CACD,CAAC,cAGN5D,KAAA,SAAMuE,QAAQ,CAAExC,YAAa,CAAC6B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eACzD/D,IAAA,UACE0E,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,uDAAuD,CACnEb,SAAS,CAAC,0EAA0E,CACpF9B,KAAK,CAAEzB,UAAW,CAClBqE,QAAQ,CAAE/C,iBAAkB,CAC5BgD,QAAQ,CAAEpE,SAAU,CACrB,CAAC,cACFT,IAAA,WACE0E,IAAI,CAAC,QAAQ,CACbG,QAAQ,CAAEpE,SAAS,EAAI,CAACF,UAAU,CAAC8B,IAAI,CAAC,CAAE,CAC1CyB,SAAS,CAAE,wFACTrD,SAAS,EAAI,CAACF,UAAU,CAAC8B,IAAI,CAAC,CAAC,CAC3B,aAAa,CACb,+BAA+B,EAClC,CAAA0B,QAAA,cAEH/D,IAAA,CAACN,iBAAiB,EAACoE,SAAS,CAAC,SAAS,CAAE,CAAC,CACnC,CAAC,EACL,CAAC,EACJ,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3D,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}